{"version":3,"sources":["actions/actions.js","utils/placeholderIDs.js","services/hacker-news-api.js","components/StoryPreviewPlaceholder.jsx","utils/normalization.js","components/StoryPreview.jsx","components/HackNews.jsx","components/Comment.jsx","components/Story.jsx","components/Header.jsx","components/Footer.jsx","components/App.jsx","reducers/reducers.js","index.js"],"names":["addLatestStories","createAction","addStory","changeLoadingStatus","setBranchStatus","changeBranchStatus","placeholderIDs","baseUrl","getNewStories","a","axios","get","then","data","getItem","storyId","catch","thrown","console","log","StoryPreviewPlaceholder","className","style","maxWidth","timestampToTime","timestamp","msPerMinute","msPerHour","msPerDay","msPerMonth","msPerYear","elapsed","Date","Math","round","StoryPreview","id","useState","story","setStory","requestStatus","setRequestStatus","useEffect","response","storyRequest","to","title","score","by","time","descendants","actionCreators","actions","connect","state","stories","ui","seconds","setSeconds","timer","setTimeout","handleUpdateStoriesIDs","clearTimeout","latestStoriesIDs","slice","onClick","length","map","storyID","placeholder","offset","Comment","commentID","kids","setKids","comment","setComment","commentBranch","getRequest","btnState","fetchingStatus","deleted","text","dangerouslySetInnerHTML","__html","status","sessionStorage","setItem","JSON","stringify","disabled","kidID","handleKids","Story","match","params","comments","setComments","handleUpdateComments","target","rel","href","url","Header","Footer","parse","getStories","main","path","exact","component","HackNews","basename","handleActions","payload","loadingStatus","combineReducers","store","createStore","reducers","window","__REDUX_DEVTOOLS_EXTENSION__","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d829aab0.chunk.js","sourcesContent":["import { createAction } from \"redux-actions\";\n\nexport const addLatestStories = createAction(\"STORIES_LATEST_ADD\");\n\nexport const addStory = createAction(\"STORY_ADD\");\n\nexport const changeLoadingStatus = createAction(\"LOADING_STATUS_CHANGE\");\n\nexport const setBranchStatus = createAction(\"BRANCH_STATUS_SET\");\n\nexport const changeBranchStatus = createAction(\"BRANCH_STATUS_CHANGE\");\n","export const placeholderIDs = [\n  101,\n  102,\n  103,\n  104,\n  105,\n  106,\n  107,\n  108,\n  109,\n  110,\n  111,\n  112,\n  113,\n  114,\n  115,\n];\n","import axios from \"axios\";\n\nconst baseUrl = \"https://hacker-news.firebaseio.com/v0/\";\n\nexport const getNewStories = async () =>\n  await axios\n    .get(`${baseUrl}newstories.json?print=pretty`)\n    .then(({ data }) => data);\n\nexport const getItem = (storyId) =>\n  axios\n    .get(`${baseUrl}item/${storyId}.json?print=pretty`)\n    .then(({ data }) => data)\n    .catch(function (thrown) {\n      console.log(thrown);\n    });\n","import React from \"react\";\n\nconst StoryPreviewPlaceholder = () => {\n  return (\n    <article className=\"story-preview\">\n      <div className=\"skeleton-item\">\n        <div>\n          <div className=\"skeleton-block\" style={{ maxWidth: \"500px\" }}>\n            {\" \"}\n          </div>\n        </div>\n        <div>\n          <div className=\"skeleton-block\" style={{ maxWidth: \"50px\" }}>\n            {\" \"}\n          </div>\n          <div className=\"skeleton-block\" style={{ maxWidth: \"100px\" }}>\n            {\" \"}\n          </div>\n          <div className=\"skeleton-block\" style={{ maxWidth: \"100px\" }}>\n            {\" \"}\n          </div>\n          <div className=\"skeleton-block\" style={{ maxWidth: \"100px\" }}>\n            {\" \"}\n          </div>\n        </div>\n      </div>\n    </article>\n  );\n};\n\nexport default StoryPreviewPlaceholder;\n","export const timestampToTime = (timestamp) => {\n  const current = new Date();\n  const previous = new Date(timestamp * 1000);\n\n  const msPerMinute = 60 * 1000;\n  const msPerHour = msPerMinute * 60;\n  const msPerDay = msPerHour * 24;\n  const msPerMonth = msPerDay * 30;\n  const msPerYear = msPerDay * 365;\n\n  const elapsed = current - previous;\n\n  if (elapsed < msPerMinute) {\n    return Math.round(elapsed / 1000) + \" seconds ago\";\n  } else if (elapsed < msPerHour) {\n    return Math.round(elapsed / msPerMinute) + \" minutes ago\";\n  } else if (elapsed < msPerDay) {\n    return Math.round(elapsed / msPerHour) + \" hours ago\";\n  } else if (elapsed < msPerMonth) {\n    return Math.round(elapsed / msPerDay) + \" days ago\";\n  } else if (elapsed < msPerYear) {\n    return Math.round(elapsed / msPerMonth) + \" months ago\";\n  } else {\n    return Math.round(elapsed / msPerYear) + \" years ago\";\n  }\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getItem } from \"../services/hacker-news-api\";\nimport StoryPreviewPlaceholder from \"./StoryPreviewPlaceholder\";\nimport { timestampToTime } from \"../utils/normalization\";\n\nconst StoryPreview = ({ id }) => {\n  const [story, setStory] = useState({});\n  const [requestStatus, setRequestStatus] = useState(\"fetching\");\n\n  useEffect(() => {\n    setRequestStatus(\"fetching\");\n    const storyRequest = async () => {\n      const response = await getItem(id);\n      setStory(response);\n    };\n    storyRequest().then(() => setRequestStatus(\"finished\"));\n  }, [id]);\n\n  return !story || requestStatus === \"fetching\" ? (\n    <StoryPreviewPlaceholder />\n  ) : (\n    <article className=\"story-preview\">\n      <Link className=\"link\" to={`/${story.id}`}>\n        {story.title}\n      </Link>\n      <section className=\"story-info\">\n        <div>\n          <span>Score:</span> {story.score}\n        </div>\n        <div>\n          <span>By:</span> {story.by}\n        </div>\n        <div>\n          <span>Posted:</span> {timestampToTime(story.time)}\n        </div>\n        <div>\n          <span>Comments:</span> {story.descendants}\n        </div>\n      </section>\n    </article>\n  );\n};\n\nexport default StoryPreview;\n","import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { placeholderIDs } from \"../utils/placeholderIDs\";\nimport * as actions from \"../actions/actions\";\nimport { getNewStories } from \"../services/hacker-news-api\";\nimport StoryPreview from \"./StoryPreview.jsx\";\nimport LazyLoad from \"react-lazyload\";\nimport StoryPreviewPlaceholder from \"./StoryPreviewPlaceholder\";\n\nconst mapStateToProps = (state) => {\n  return { stories: state.stories, ui: state.ui };\n};\n\nconst actionCreators = {\n  addLatestStories: actions.addLatestStories,\n};\n\nconst HackNews = ({ stories, addLatestStories }) => {\n  const [seconds, setSeconds] = useState(59);\n\n  // >> TIMER\n  useEffect(() => {\n    let timer;\n    if (seconds > 0) {\n      timer = setTimeout(() => setSeconds(seconds - 1), 1000);\n    } else {\n      handleUpdateStoriesIDs().then(() => setSeconds(59));\n    }\n\n    return () => {\n      clearTimeout(timer);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [setSeconds, seconds]);\n\n  // << TIMER\n\n  const handleUpdateStoriesIDs = async () => {\n    const latestStoriesIDs = await getNewStories();\n    addLatestStories({ latestStoriesIDs: latestStoriesIDs.slice(0, 100) });\n    setSeconds(59);\n  };\n\n  const renderPlaceholders = () =>\n    placeholderIDs.map((id) => (\n      <div key={id} className=\"lazyload-wrapper\">\n        <StoryPreviewPlaceholder />\n      </div>\n    ));\n\n  const renderStories = () =>\n    stories.latestStoriesIDs.map((storyID) => (\n      <LazyLoad\n        key={storyID}\n        placeholder={<StoryPreviewPlaceholder />}\n        offset={300}\n      >\n        <StoryPreview key={storyID} id={storyID} />\n      </LazyLoad>\n    ));\n\n  return (\n    <main>\n      <h2>LATEST STORIES</h2>\n      <div className=\"refresh-btn-wrapper\">\n        <button\n          className=\"button button-animated\"\n          onClick={handleUpdateStoriesIDs}\n        >\n          <span>\n            <span>Refresh {seconds}</span>\n          </span>\n        </button>\n      </div>\n      <section className=\"stories-list\">\n        {stories.latestStoriesIDs.length === 0\n          ? renderPlaceholders()\n          : renderStories()}\n      </section>\n    </main>\n  );\n};\n\nexport default connect(mapStateToProps, actionCreators)(HackNews);\n","import React, { useEffect, useState } from \"react\";\nimport { getItem } from \"../services/hacker-news-api\";\nimport * as actions from \"../actions/actions\";\nimport { connect } from \"react-redux\";\nimport LazyLoad from \"react-lazyload\";\nimport { timestampToTime } from \"../utils/normalization\";\n\nconst mapStateToProps = (state) => {\n  return { ui: state.ui };\n};\n\nconst actionCreators = { changeBranchStatus: actions.changeBranchStatus };\n\nconst Comment = ({ commentID, changeBranchStatus, ui }) => {\n  const [kids, setKids] = useState([]);\n  const [comment, setComment] = useState({});\n  const [requestStatus, setRequestStatus] = useState(\"finished\");\n\n  useEffect(() => {\n    const getRequest = async () => {\n      setRequestStatus(\"fetching\");\n      const data = await getItem(commentID);\n      setComment(data);\n      if (\n        !data ||\n        !data.kids ||\n        !ui.commentBranch[data.id] ||\n        ui.commentBranch[data.id] === \"closed\"\n      ) {\n        return;\n      }\n      setKids(data.kids);\n    };\n\n    getRequest().then(() => setRequestStatus(\"finished\"));\n  }, [commentID, ui]);\n\n  const createMarkup = () => {\n    return { __html: comment.text };\n  };\n\n  const handleKids = () => {\n    if (comment.kids === 0 || kids.length === 0 || !ui) {\n      return;\n    }\n    if (\n      ui.commentBranch[comment.id] &&\n      ui.commentBranch[comment.id] === \"opened\"\n    ) {\n      return kids.map((kidID) => (\n        <LazyLoad key={kidID}>\n          <Comment\n            key={kidID}\n            commentID={kidID}\n            changeBranchStatus={changeBranchStatus}\n            ui={ui}\n          />\n        </LazyLoad>\n      ));\n    }\n  };\n\n  const handleChangeBranchStatus = () => {\n    const status =\n      !ui.commentBranch[comment.id] || ui.commentBranch[comment.id] === \"closed\"\n        ? \"opened\"\n        : \"closed\";\n    sessionStorage.setItem(\n      \"branchesStatus\",\n      JSON.stringify({ ...ui.commentBranch, [comment.id]: status })\n    );\n    changeBranchStatus({ id: comment.id, status });\n  };\n\n  const btnState =\n    !ui.commentBranch[comment.id] || ui.commentBranch[comment.id] === \"closed\";\n\n  const fetchingStatus = requestStatus === \"fetching\";\n\n  const renderHeader = () =>\n    !comment.by ? (\n      <div\n        className=\"skeleton-block skeleton-block-header\"\n        style={{ maxWidth: \"300px\" }}\n      >\n        {\" \"}\n      </div>\n    ) : (\n      <>\n        <span>By: </span>\n        {comment.by}\n        <span> Posted: </span>\n        {timestampToTime(comment.time)}\n      </>\n    );\n\n  const renderText = () => {\n    if (comment.deleted) {\n      return <h4>[commentary deleted]</h4>;\n    }\n    if (comment.text) {\n      return (\n        <div\n          className=\"comment-text\"\n          dangerouslySetInnerHTML={createMarkup()}\n        />\n      );\n    }\n    return (\n      <div className=\"comment-text\">\n        <div className=\"skeleton-block\"> </div>\n        <div className=\"skeleton-block\"> </div>\n        <div className=\"skeleton-block\"> </div>\n      </div>\n    );\n  };\n\n  return (\n    comment && (\n      <article className=\"comment\">\n        <div className=\"comment-info\">{renderHeader()}</div>\n        {renderText()}\n        {comment.kids ? (\n          <button\n            className=\"button button-animated button-comment\"\n            onClick={handleChangeBranchStatus}\n            disabled={fetchingStatus}\n          >\n            <span>\n              <span>{btnState ? \"Show replies\" : \"Hide replies\"}</span>\n            </span>\n          </button>\n        ) : (\n          <button className=\"button btn-disabled\" disabled>\n            expand replies\n          </button>\n        )}\n        {handleKids()}\n      </article>\n    )\n  );\n};\n\nexport default connect(mapStateToProps, actionCreators)(Comment);\n","import React, { useEffect, useState } from \"react\";\nimport { getItem } from \"../services/hacker-news-api\";\nimport Comment from \"../components/Comment.jsx\";\nimport StoryPreviewPlaceholder from \"./StoryPreviewPlaceholder\";\nimport LazyLoad from \"react-lazyload\";\nimport { timestampToTime } from \"../utils/normalization\";\n\nconst Story = ({\n  match: {\n    params: { id },\n  },\n}) => {\n  const [story, setStory] = useState({});\n  const [comments, setComments] = useState([]);\n  const [seconds, setSeconds] = useState(59);\n\n  // >> TIMER\n\n  useEffect(() => {\n    let timer;\n    if (seconds > 0) {\n      timer = setTimeout(() => setSeconds(seconds - 1), 1000);\n    } else {\n      handleUpdateComments().then(() => setSeconds(59));\n    }\n    return () => {\n      clearTimeout(timer);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [setSeconds, seconds]);\n\n  // << TIMER\n\n  useEffect(() => {\n    const storyRequest = async () => {\n      const response = await getItem(id);\n      if (response.kids) {\n        setComments(response.kids);\n      }\n      setStory(response);\n    };\n    storyRequest().then(() => {});\n  }, [id, setComments]);\n\n  const renderComments = () =>\n    comments.map((commentID) => (\n      <LazyLoad key={commentID} placeholder={<StoryPreviewPlaceholder />}>\n        <Comment key={commentID} commentID={commentID} />\n      </LazyLoad>\n    ));\n\n  const handleUpdateComments = async () => {\n    const response = await getItem(id);\n    if (response.kids) {\n      setComments(response.kids);\n    }\n    setStory(response);\n    setSeconds(59);\n  };\n\n  const renderTitle = () => {\n    if (story.title) {\n      return (\n        <h2>\n          {story.title} (\n          <a\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"nav-link link-source\"\n            href={story.url}\n          >\n            SOURCE\n          </a>\n          )\n        </h2>\n      );\n    }\n    return (\n      <div className=\"skeleton-item justify-center\">\n        <div\n          className=\"skeleton-block skeleton-block-title\"\n          style={{ maxWidth: \"500px\" }}\n        >\n          {\" \"}\n        </div>\n      </div>\n    );\n  };\n\n  const renderInfo = () => {\n    if (story.by) {\n      return (\n        <section className=\"story-info justify-center\">\n          <div>\n            <span>Score:</span> {story.score}\n          </div>\n          <div>\n            <span>By:</span> {story.by}\n          </div>\n          <div>\n            <span>Posted:</span> {timestampToTime(story.time)}\n          </div>\n        </section>\n      );\n    }\n    return (\n      <div className=\"skeleton-item justify-center\">\n        <div\n          className=\"skeleton-block skeleton-block-info\"\n          style={{ maxWidth: \"50px\" }}\n        >\n          {\" \"}\n        </div>\n        <div\n          className=\"skeleton-block skeleton-block-info\"\n          style={{ maxWidth: \"100px\" }}\n        >\n          {\" \"}\n        </div>\n        <div\n          className=\"skeleton-block skeleton-block-info\"\n          style={{ maxWidth: \"150px\" }}\n        >\n          {\" \"}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    story && (\n      <main>\n        <article>\n          {renderTitle()}\n          {renderInfo()}\n          <div className=\"comments-header\">\n            <div className=\"comment-counter-wrapper\">\n              <span>Comments: {story.descendants ?? 0}</span>\n            </div>\n            <button\n              className=\"button button-animated\"\n              onClick={handleUpdateComments}\n            >\n              <span>\n                <span>Refresh {seconds}</span>\n              </span>\n            </button>\n          </div>\n          <section className=\"comments-list\">\n            {comments.length > 0 ? (\n              renderComments()\n            ) : (\n              <h3 className=\"h3\">No comments yet</h3>\n            )}\n          </section>\n        </article>\n      </main>\n    )\n  );\n};\n\nexport default Story;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Header = () => {\n  return (\n    <header>\n      <h1>HACKER NEWS</h1>\n      <nav className=\"nav-center\">\n        <Link to=\"/\" className=\"nav-link\">\n          STORIES\n        </Link>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"nav-link\"\n          href=\"https://github.com/Nistler/hacker-news-wrapper\"\n        >\n          SOURCE CODE\n        </a>\n      </nav>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\n\nconst Footer = () => {\n  return (\n    <footer>\n      <h3 className=\"h3\">Hacker News API wrapper</h3>\n      <div>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"link\"\n          href=\"https://github.com/Nistler/hacker-news-wrapper/\"\n        >\n          Build with React. You can see the description and source code in my\n          repository.\n        </a>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport * as actions from \"../actions/actions\";\nimport HackNews from \"./HackNews\";\nimport Story from \"./Story.jsx\";\n//import { stories } from \"../__fixtures__/stories\"; // development\n//import { storiesIDs } from \"../__fixtures__/storiesIDs\"; // development\nimport { getNewStories } from \"../services/hacker-news-api\"; // production\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\n\nconst mapStateToProps = (state) => {\n  return { stories: state.stories };\n};\n\nconst actionCreators = {\n  addLatestStories: actions.addLatestStories,\n  addStory: actions.addStory,\n  setBranchStatus: actions.setBranchStatus,\n};\n\nconst App = ({ addLatestStories, addStory, setBranchStatus }) => {\n  useEffect(() => {\n    const getStories = async () => {\n      const latestStoriesIDs = await getNewStories(); // production\n      addLatestStories({ latestStoriesIDs: latestStoriesIDs.slice(0, 100) }); // production\n      const data = JSON.parse(sessionStorage.getItem(\"branchesStatus\"));\n      const commentBranch = data ?? {};\n      setBranchStatus({ commentBranch });\n      //addLatestStories({ latestStoriesIDs: storiesIDs }); // development\n      //addStory({ stories }); // development\n    };\n    getStories().then(() => {});\n  }, [addLatestStories, addStory, setBranchStatus]);\n\n  const main = (\n    <Switch>\n      <Route path=\"/\" exact component={HackNews} />\n      <Route path=\"/:id\" component={Story} />\n    </Switch>\n  );\n\n  return (\n    <Router basename=\"/\">\n      <Header />\n      {main}\n      <Footer />\n    </Router>\n  );\n};\n\nexport default connect(mapStateToProps, actionCreators)(App);\n","import { handleActions } from \"redux-actions\";\nimport { combineReducers } from \"@reduxjs/toolkit\";\nimport * as actions from \"../actions/actions\";\n\nconst stories = handleActions(\n  {\n    [actions.addLatestStories](state, { payload: { latestStoriesIDs } }) {\n      return { latestStoriesIDs, stories: state.stories };\n    },\n    [actions.addStory]({ latestStoriesIDs }, { payload: { stories } }) {\n      return { latestStoriesIDs, stories };\n    },\n  },\n  { latestStoriesIDs: [], stories: [] }\n);\n\nconst ui = handleActions(\n  {\n    [actions.changeLoadingStatus](\n      { commentBranch },\n      { payload: { loadingStatus } }\n    ) {\n      return { commentBranch, loadingStatus };\n    },\n    [actions.changeBranchStatus](\n      { commentBranch, loadingStatus },\n      { payload: { id, status } }\n    ) {\n      return {\n        loadingStatus,\n        commentBranch: { ...commentBranch, [id]: status },\n      };\n    },\n    [actions.setBranchStatus](\n      { loadingStatus },\n      { payload: { commentBranch } }\n    ) {\n      return {\n        loadingStatus,\n        commentBranch,\n      };\n    },\n  },\n  { loadingStatus: \"loading\", commentBranch: {} }\n);\n\nexport default combineReducers({ stories, ui });\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport \"./style/main.css\";\nimport App from \"./components/App\";\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"@reduxjs/toolkit\";\nimport reducers from \"./reducers/reducers.js\";\n// comment\n\nconst store = createStore(\n  reducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nrender(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}